<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="utf-8">
    <title>{{ profile.full_name }} | Portfolio</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom Design -->
    <link href="{% static 'css/liquid-glass.css' %}" rel="stylesheet">

    <style>
        /* Section Specific adjustments */
        .skill-bar-container {
            margin-bottom: 1.5rem;
        }

        .skill-bar-bg {
            height: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .skill-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            width: 0;
            transition: width 1.5s cubic-bezier(0.1, 0, 0.2, 1);
        }

        /* Contact Form */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .glass-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            outline: none;
            transition: border-color 0.3s;
        }

        .glass-input:focus {
            border-color: var(--primary);
        }

        /* Lightbox Styles */
        #lightbox-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(2, 6, 23, 0.95);
            backdrop-filter: blur(20px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        #lightbox-img {
            max-width: 90%;
            max-height: 80%;
            border-radius: 12px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #lightbox-modal.active #lightbox-img {
            transform: scale(1);
        }

        .project-card {
            cursor: zoom-in;
        }

        /* Responsive Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        /* Mobile Nav */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .glass-nav {
                height: 60px;
                padding: 0 20px;
            }
        }
    </style>
</head>

<body>
    <!-- Cursor Follower -->
    <div id="cursor-follower"></div>
    <div id="cursor-glow"></div>

    <!-- Loader -->
    <div id="liquid-loader">
        <div class="loader-blob"></div>
    </div>

    <!-- Background -->
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- Navigation -->
    <nav class="glass-nav">
        <a href="#" class="gradient-text" style="font-size: 1.5rem; font-weight: 800; text-decoration: none;">HT.</a>
        <div class="nav-links">
            <a href="#home" class="active">Home</a>
            <a href="#about">About</a>
            <a href="#education">Education</a>
            <a href="#services">Services</a>
            <a href="#projects">Work</a>
            <a href="#contact">Contact</a>
        </div>
        <a href="#contact" class="btn-glass" style="padding: 0.5rem 1.2rem; font-size: 0.9rem;">Hire Me</a>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-img-container">
            <img class="hero-img" src="{{ profile.profile_image.url }}" alt="{{ profile.full_name }}">
        </div>
        <h3 style="color: var(--text-dim); margin-bottom: 1rem; letter-spacing: 2px;">HELLO, I'M</h3>
        <h1 class="gradient-text">{{ profile.full_name }}</h1>
        <h2
            style="color: var(--text-dim); height: 1.5em; overflow: hidden; display: flex; justify-content: center; align-items: center;">
            <span id="typed-text"
                data-skills='[{% for skill in skills %}"{{ skill.name }}"{% if not forloop.last %},{% endif %}{% endfor %}]'></span>
        </h2>
        <div style="margin-top: 2rem;">
            <a href="#projects" class="btn-glass">View My Work</a>
        </div>
    </section>

    <!-- About Section -->
    <section id="about">
        <div class="glass-card"
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 4rem; align-items: center;">
            <div>
                <h2 class="gradient-text">About Me</h2>
                <p style="font-size: 1.1rem; color: var(--text-dim);">{{ profile.bio }}</p>
                <div style="margin-top: 2rem; display: flex; gap: 2rem;">
                    <div>
                        <h1 class="gradient-text" style="font-size: 3rem;">{{ profile.years_experience }}+</h1>
                        <p style="color: var(--text-dim);">Years Experience</p>
                    </div>
                    <div>
                        <h1 class="gradient-text" style="font-size: 3rem;">{{ result.completed_projects }}+</h1>
                        <p style="color: var(--text-dim);">Projects Done</p>
                    </div>
                </div>
            </div>
            <div>
                <h3 style="margin-bottom: 1.5rem;">Core Skills</h3>
                {% for skill in skills %}
                <div class="skill-bar-container">
                    <div style="display: flex; justify-content: space-between;">
                        <span>{{ skill.name }}</span>
                        <span style="color: var(--text-dim);">{{ skill.level }}%</span>
                    </div>
                    <div class="skill-bar-bg">
                        <div class="skill-bar-fill" data-percent="{{ skill.level }}"></div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Education -->
    <section id="education">
        <h2 class="gradient-text" style="text-align: center; margin-bottom: 4rem;">Academic Journey</h2>
        <div style="display: flex; flex-direction: column; gap: 2rem; max-width: 900px; margin: 0 auto;">
            {% for edu in education %}
            <div class="glass-card" style="display: flex; gap: 2rem; align-items: flex-start;">
                <div
                    style="background: var(--primary-glow); padding: 1rem; border-radius: 12px; min-width: 100px; text-align: center; font-weight: 700; color: white;">
                    {{ edu.year }}
                </div>
                <div>
                    <h3 style="margin-bottom: 0.5rem;">{{ edu.degree }}</h3>
                    <h4 style="color: var(--accent); font-size: 1rem; margin-bottom: 1rem;">{{ edu.school }}</h4>
                    <p style="color: var(--text-dim);">{{ edu.description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Services -->
    <section id="services">
        <h2 class="gradient-text" style="text-align: center;">What I Do</h2>
        <div class="services-grid">
            {% for service in services %}
            <div class="glass-card">
                <div
                    style="width: 60px; height: 60px; background: var(--primary-glow); border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                    <i class="fa {{ service.icon }} fa-2x" style="color: white;"></i>
                </div>
                <h3>{{ service.title }}</h3>
                <p style="color: var(--text-dim); margin: 1rem 0;">{{ service.description }}</p>
                <p style="font-weight: 700; color: var(--accent);">Starts at ${{ service.price_from }}</p>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Projects -->
    <section id="projects">
        <h2 class="gradient-text" style="text-align: center; margin-bottom: 4rem;">Gallery & Projects</h2>
        <div class="projects-grid">
            {% for p in projects %}
            <div class="glass-card project-card"
                style="padding: 0; position: relative; border-radius: 24px; overflow: hidden;"
                onclick="openLightbox('{{ p.image.url }}', '{{ p.title }}')">
                <img src="{{ p.image.url }}" alt="{{ p.title }}" class="project-img" loading="lazy"
                    style="border-radius: 24px 24px 0 0; width: 100%; display: block;">
                <div class="project-info">
                    <h3 style="font-size: 1.2rem;">{{ p.title }}</h3>
                    <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 1rem;">{{ p.description }}</p>
                    {% if p.project_url %}
                    <a href="{{ p.project_url }}" target="_blank" class="btn-glass"
                        style="padding: 0.4rem 0.8rem; font-size: 0.8rem; background: transparent; border: 1px solid var(--glass-border);"
                        onclick="event.stopPropagation()">Visit Site</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Lightbox Modal -->
    <div id="lightbox-modal" onclick="closeLightbox()">
        <img id="lightbox-img" src="" alt="">
        <h3 id="lightbox-title" style="position: absolute; bottom: 5%; color: white; text-align: center; width: 100%;">
        </h3>
    </div>

    <!-- Contact -->
    <section id="contact">
        <div class="glass-card" style="max-width: 800px; margin: 0 auto;">
            <h2 class="gradient-text" style="text-align: center;">Let's Talk</h2>
            {% if success %}
            <div
                style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10B981; padding: 1rem; border-radius: 12px; text-align: center; margin-bottom: 2rem;">
                Message sent successfully! I'll get back to you soon.
            </div>
            {% endif %}
            <form method="POST">
                {% csrf_token %}
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div class="form-group">
                        <label>Name</label>
                        {{ form.name }}
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        {{ form.phone }}
                    </div>
                </div>
                <div class="form-group">
                    <label>Subject</label>
                    {{ form.subject }}
                </div>
                <div class="form-group">
                    <label>Message</label>
                    {{ form.message }}
                </div>
                <button type="submit" class="btn-glass" style="width: 100%; border: none; cursor: pointer;">Send
                    Message</button>
            </form>

            <div style="margin-top: 3rem; display: flex; justify-content: center; gap: 2rem;">
                <a href="tel:{{ profile.phone }}" style="color: white; text-decoration: none;"><i
                        class="fa fa-phone"></i> {{ profile.phone }}</a>
                <a href="mailto:{{ profile.email }}" style="color: white; text-decoration: none;"><i
                        class="fa fa-envelope"></i> {{ profile.email }}</a>
            </div>
        </div>
    </section>

    <footer
        style="padding: 4rem 1rem; text-align: center; color: var(--text-dim); border-top: 1px solid var(--glass-border);">
        {% if profile.telegram_link %}
        <div style="margin-bottom: 2rem;">
            <a href="{{ profile.telegram_link }}" target="_blank" class="btn-glass"
                style="padding: 0.6rem 1.5rem; font-size: 0.9rem; background: rgba(0, 136, 204, 0.1); border: 1px solid rgba(0, 136, 204, 0.3);">
                <i class="fab fa-telegram-plane" style="margin-right: 8px;"></i> Join Telegram Channel
            </a>
        </div>
        {% endif %}
        <p>&copy; 2026 {{ profile.full_name }}. Built with Liquid Glass.</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Loader
        window.addEventListener('load', () => {
            const loader = document.getElementById('liquid-loader');
            loader.style.opacity = '0';
            setTimeout(() => loader.style.display = 'none', 500);

            // Trigger skill bars
            const bars = document.querySelectorAll('.skill-bar-fill');
            bars.forEach(bar => {
                bar.style.width = bar.getAttribute('data-percent') + '%';
            });
        });

        // Stabilized Typewriter
        const typedElement = document.getElementById("typed-text");
        const skills = JSON.parse(typedElement.getAttribute('data-skills') || '[]');

        let skillIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function type() {
            if (skills.length === 0) return;
            const currentSkill = skills[skillIndex];

            if (isDeleting) {
                typedElement.textContent = currentSkill.substring(0, charIndex - 1);
                charIndex--;
            } else {
                typedElement.textContent = currentSkill.substring(0, charIndex + 1);
                charIndex++;
            }

            let typeSpeed = isDeleting ? 30 : 60;

            if (!isDeleting && charIndex === currentSkill.length) {
                isDeleting = true;
                typeSpeed = 3000;
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                skillIndex = (skillIndex + 1) % skills.length;
                typeSpeed = 800;
            }

            setTimeout(type, typeSpeed);
        }
        if (skills.length > 0) setTimeout(type, 1000);

        // Smooth scroll for nav
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Active link on scroll
        window.addEventListener('scroll', () => {
            let current = '';
            const sections = document.querySelectorAll('section');
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.nav-links a').forEach(a => {
                a.classList.remove('active');
                if (a.getAttribute('href').includes(current)) {
                    a.classList.add('active');
                }
            });
        });

        // Lightbox Logic
        function openLightbox(url, title) {
            const modal = document.getElementById('lightbox-modal');
            const img = document.getElementById('lightbox-img');
            const titleEl = document.getElementById('lightbox-title');

            img.src = url;
            titleEl.textContent = title;
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const modal = document.getElementById('lightbox-modal');
            modal.classList.remove('active');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        // --- Custom Cursor Logic ---
        const follower = document.getElementById('cursor-follower');
        const glow = document.getElementById('cursor-glow');
        let mouseX = 0, mouseY = 0;
        let followerX = 0, followerY = 0;

        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            glow.style.transform = `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%)`;
        });

        function animateCursor() {
            followerX += (mouseX - followerX) * 0.1;
            followerY += (mouseY - followerY) * 0.1;
            follower.style.transform = `translate(${followerX}px, ${followerY}px) translate(-50%, -50%)`;
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // Expand on links
        const hoverTargets = 'a, button, .project-card, .glass-card';
        document.querySelectorAll(hoverTargets).forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('cursor-hover'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('cursor-hover'));
        });
    </script>
</body>

</html>